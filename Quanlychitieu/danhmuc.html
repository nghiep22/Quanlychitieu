<!DOCTYPE html>
<html lang="vi" ng-app="walletApp">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QL Ng√¢n Qu·ªπ - Danh m·ª•c</title>
  <link rel="stylesheet" href="index.css">
</head>

<body ng-controller="CategoriesCtrl as vm">
  <header class="header">
    <div class="header-container">
      <div class="logo">
        <h1>QL Ng√¢n Qu·ªπ</h1>
      </div>

      <div class="header-search">
        <input type="text" placeholder="T√¨m ki·∫øm danh m·ª•c..." ng-model="vm.filter.keyword">
      </div>

      <div class="header-right">
        <div class="avatar-dropdown">
          <img src="https://via.placeholder.com/40" alt="Avatar" class="avatar-img">
          <span class="user-name">Tr·∫ßn VƒÉn A</span>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item">H·ªì s∆°</a>
            <a href="#" class="dropdown-item">ƒê·ªïi m·∫≠t kh·∫©u</a>
            <a href="#" class="dropdown-item" id="btnLogoutUser">ƒêƒÉng xu·∫•t</a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <nav class="nav">
    <div class="nav-container">
      <a href="index.html" class="nav-item">T·ªïng quan</a>
      <a href="giaodich.html" class="nav-item">Giao d·ªãch</a>
      <a href="vi.html" class="nav-item">V√≠</a>
      <a href="danhmuc.html" class="nav-item active">Danh m·ª•c</a>
      <a href="ngansach.html" class="nav-item">Ng√¢n s√°ch</a>
      <a href="muctieu.html" class="nav-item">M·ª•c ti√™u</a>
    </div>
  </nav>

  <main class="container">
    <div class="grid">
      <div class="left">
        <div class="card">
          <div class="card-header">
            <h2>Danh m·ª•c thu/chi</h2>
            <button class="btn btn-primary" id="btnAddCategory" ng-click="vm.moModalThem()">+ Th√™m danh m·ª•c</button>
          </div>

          <div class="filters" style="margin:12px 0; display:flex; gap:10px; flex-wrap:wrap;">
            <select id="filterLoai" ng-model="vm.filter.loai">
              <option value="">-- L·ªçc theo lo·∫°i --</option>
              <option value="THU">THU</option>
              <option value="CHI">CHI</option>
            </select>
            <button class="btn btn-outline" type="button" ng-click="vm.taiDanhSach()">L·ªçc</button>
          </div>

          <div style="overflow:auto;">
            <table>
              <thead>
                <tr>
                  <th>T√™n danh m·ª•c</th>
                  <th>Lo·∫°i</th>
                  <th>Icon</th>
                  <th>Ghi ch√∫</th>
                </tr>
              </thead>

              <tbody>
                <tr ng-repeat="dm in (vm.danhSach | filter:vm.filter.keyword)">
                  <td>{{dm.tenDanhMuc || dm.TenDanhMuc}}</td>
                  <td>
                    <span class="badge"
                      ng-class="(dm.loai || dm.Loai) == 'THU' ? 'badge-income' : 'badge-expense'">
                      {{dm.loai || dm.Loai}}
                    </span>
                  </td>
                  <td>{{dm.icon || dm.Icon}}</td>
                  <td>{{dm.ghiChu || dm.GhiChu}}</td>
                </tr>

                <tr ng-if="!vm.loading && (!vm.danhSach || vm.danhSach.length === 0)">
                  <td colspan="4" style="text-align:center;color:#64748b;">Ch∆∞a c√≥ danh m·ª•c</td>
                </tr>

                <tr ng-if="vm.loading">
                  <td colspan="4" style="text-align:center;color:#64748b;">ƒêang t·∫£i...</td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>

      <div class="right">
        <div class="card">
          <h2>G·ª£i √Ω</h2>
          <p style="color:#64748b;">T√°ch danh m·ª•c theo m·ª•c ƒë√≠ch ƒë·ªÉ th·ªëng k√™ d·ªÖ h∆°n (VD: ‚ÄúƒÇn u·ªëng - s√°ng‚Äù, ‚ÄúƒÇn u·ªëng - t·ªëi‚Äù).</p>
          <p style="color:#64748b; margin-top:10px;">
            TaiKhoanId ƒëang d√πng: <b>{{vm.taiKhoanId}}</b>
          </p>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <p>&copy; 2024 QL Ng√¢n Qu·ªπ.</p>
  </footer>

  <!-- Modal: Th√™m danh m·ª•c -->
  <div class="modal" id="modalAddCategory"
     ng-style="{'display': vm.isModalOpen ? 'flex' : 'none'}">



    <div class="modal-content">
      <div class="modal-header">
        <h2>Th√™m danh m·ª•c</h2>
        <button class="modal-close" type="button" ng-click="vm.dongModalThem()">&times;</button>
      </div>

      <form class="modal-form" ng-submit="vm.taoDanhMuc()">
        <div class="form-group">
          <label>T√™n danh m·ª•c</label>
          <input type="text" id="tenDanhMuc" placeholder="Vd: ƒÇn u·ªëng" ng-model="vm.form.tenDanhMuc" required>
        </div>

        <div class="form-group">
          <label>Lo·∫°i</label>
          <select id="loaiDanhMuc" ng-model="vm.form.loai" required>
            <option value="">-- Ch·ªçn lo·∫°i --</option>
            <option value="THU">THU</option>
            <option value="CHI">CHI</option>
          </select>
        </div>

        <div class="form-group">
          <label>Ghi ch√∫</label>
          <input type="text" id="ghiChu" placeholder="Vd: ƒÇn u·ªëng h√†ng ng√†y" ng-model="vm.form.ghiChu">
        </div>

        <div class="form-group">
          <label>Icon</label>
          <input type="text" id="icon" placeholder="Vd: üçΩÔ∏è" ng-model="vm.form.icon">
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">T·∫°o danh m·ª•c</button>
          <button type="button" class="btn btn-outline modal-cancel" ng-click="vm.dongModalThem()">H·ªßy</button>
        </div>
      </form>
    </div>
  </div>

  <!-- D√ôNG FILE LOCAL (ƒë√∫ng nh∆∞ th∆∞ m·ª•c c·ªßa b·∫°n) -->
  <script src="./angular.min.js"></script>
  <script src="./categories.app.js"></script>

</body>

</html>
