<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng K√Ω - QL Ng√¢n Qu·ªπ</title>
    <link rel="stylesheet" href="auth.css">
</head>
<body>
    <div class="login-container">
        <div class="login-box register-box">
            <div class="login-header">
                <div class="logo">üìä</div>
                <h1>QL Ng√¢n Qu·ªπ</h1>
                <p>T·∫°o t√†i kho·∫£n m·ªõi</p>
            </div>
            
            <div id="registerMessage" style="display:none; margin: 0 0 14px; padding: 10px 12px; border-radius: 10px;"></div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="hoTen">H·ªç t√™n</label>
                    <input 
                        type="text" 
                        id="hoTen" 
                        name="hoTen" 
                        placeholder="Nh·∫≠p h·ªç t√™n ƒë·∫ßy ƒë·ªß"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="tenDangNhap">T√™n ƒëƒÉng nh·∫≠p</label>
                    <input 
                        type="text" 
                        id="tenDangNhap" 
                        name="tenDangNhap" 
                        placeholder="T·ªëi thi·ªÉu 4 k√Ω t·ª±"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="matKhau">M·∫≠t kh·∫©u</label>
                    <input 
                        type="password" 
                        id="matKhau" 
                        name="matKhau" 
                        placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="xacNhanMatKhau">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                    <input 
                        type="password" 
                        id="xacNhanMatKhau" 
                        name="xacNhanMatKhau" 
                        placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u"
                        required
                    >
                </div>

                <div class="terms-checkbox">
                    <input 
                        type="checkbox" 
                        id="dongY" 
                        name="dongY"
                        required
                    >
                    <label for="dongY">
                        T√¥i ƒë·ªìng √Ω v·ªõi <a href="#">ƒêi·ªÅu kho·∫£n d·ªãch v·ª•</a> 
                        v√† <a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                    </label>
                </div>

                <button type="submit" class="btn-submit">ƒêƒÉng K√Ω</button>
            </form>

            <div class="login-footer">
                ƒê√£ c√≥ t√†i kho·∫£n? <a href="dangnhap.html">ƒêƒÉng nh·∫≠p</a>
            </div>
        </div>
    </div>
    <script src="auth-client.js"></script>
    <script>
      (function(){
        var form = document.getElementById("registerForm");
        var msg = document.getElementById("registerMessage");
        function showMsg(text, ok){
          if(!msg) return;
          msg.style.display = "block";
          msg.style.background = ok ? "rgba(16,185,129,0.12)" : "rgba(239,68,68,0.12)";
          msg.style.color = ok ? "#065f46" : "#7f1d1d";
          msg.style.border = ok ? "1px solid rgba(16,185,129,0.25)" : "1px solid rgba(239,68,68,0.25)";
          msg.textContent = text;
        }
        if(form){
          form.addEventListener("submit", async function(e){
            e.preventDefault();
            var hoTen = document.getElementById("hoTen").value.trim();
            var tenDangNhap = document.getElementById("tenDangNhap").value.trim();
            var matKhau = document.getElementById("matKhau").value;
            var xacNhan = document.getElementById("xacNhanMatKhau").value;
            if(matKhau !== xacNhan){
              showMsg("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp.", false);
              return;
            }
            try{
              showMsg("ƒêang t·∫°o t√†i kho·∫£n...", true);
              await AUTH.register(hoTen, tenDangNhap, matKhau);
              showMsg("ƒêƒÉng k√Ω th√†nh c√¥ng! Chuy·ªÉn sang ƒëƒÉng nh·∫≠p...", true);
              setTimeout(function(){ window.location.href = "dangnhap.html"; }, 700);
            }catch(err){
              showMsg(err.message || "ƒêƒÉng k√Ω th·∫•t b·∫°i", false);
            }
          });
        }
      })();
    </script>
</body>
</html>
